kubectl port-forward -n monitoring service/prometheus-service 9090
kubectl port-forward -n monitoring service/grafana-service 3000

http://localhost:9100/metrics

grafana-kubernetes-datasource
https://akseu2c011opbkdev01-2f4cc50c.hcp.eastus2.azmk8s.io:443


sum(kube_deployment_status_replicas{deployment=~"$deployment"})
sum(kube_deployment_status_replicas{namespace,deployment})
sum(kube_deployment_status_replicas_available{deployment=~"$deployment"})
sum(kube_pod_info{node=~"$node"}) / sum(kube_node_status_allocatable_pods{node=~"$node"})


sum((avg(irate(node_cpu{nodename=~"$node", mode="iowait"}[5m])) * 100))
sum((avg(irate(node_cpu{nodename=~"$node", mode="steal"}[5m])) * 100))
sum((avg(irate(node_cpu{nodename=~"$node", mode="iowait"}[5m])) * 100))
sum(kube_deployment_status_replicas_available{deployment=~"$deployment"})

Failed to list *v1beta1.Ingress: ingresses.extensions is forbidden: User "system:serviceaccount:monitoring:kube-state-metrics" cannot list resource "ingresses" in API group "extensions" at the cluster scope

ca-certificate===

-----BEGIN CERTIFICATE-----
MIIExzCCAq+gAwIBAgIQPZ++JfsmgpGHKB6cMz/xZzANBgkqhkiG9w0BAQsFADAN
MQswCQYDVQQDEwJjYTAeFw0xOTA1MTcxNjIwMTlaFw00OTA1MDkxNjMwMTlaMA0x
CzAJBgNVBAMTAmNhMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAnTwh
Kbk9ocvF2JSo0Z+cJgsh3cGWn5LaiFWJaL+wVubC9HWbp3LC9z8ldxamDfQozy0I
6/evpFvkUDW1xGDgl/u52Vq8Q+2eKvuVDI6bc5R7YyfNFaBcFFJ/fGuin96TagMG
wNxlBFDzkr1LeLF/1csLAmVmVzbDJot6+itbgrLuAhtTYd6FSn7eowOefxv7f+84
+Mvl+u/NkkhdsRgiBzVI5uzQ+51kuQJnT+W4r/a5Dj9sAmmSFJYpZqhlhelZdAGl
2fNmBnMzz6jb/OS3q7Ep5pcmue2kpnJ9ee5thq9+r9YOrmRYOoOLR9D+qF0+vr39
l5LmZ9Q7AuM6fFavOW2rJicH3xKHPQBSDU559rpv6xDJAvc1HLC/x26Y7fgroehS
MSZPAW/YYlbDY56DzRWGCmh3xBO88bpCzJ0lsLFpVPA6BLMwxk7E+SXFMR/9birh
N3anCsh/98War539KkUAy8UVufUUPJ1rkY/YzObZS3lff+YL0wTUsl9I6NkqpZBl
nW5+Zg21wuutyz8NlS/yeEassmDxYYuqFQ7S8Sy2qLI9uQiHEY6M696hkgdEI/Ws
YadZM2If3sdV1WRZ3cl/6+KknauQNC+S3a0muYX9kenmef/EJyWGayXbshIdlGlS
7WzCDCwznrWJJ/1Fq2OkKwV0BkQgMTVTK49HvmcCAwEAAaMjMCEwDgYDVR0PAQH/
BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggIBAAWOSwuj
56xv4tgjTmsqN6n58LlMmCgcWmvyhpq6oJ+Fg7064afwAoaPFD+tKTlGWkmcrzOx
KpdJ3Fx0a+6BuvhhIKQIHTnjFXHPB6sfueQ7PerFADaXKawxTiZcB/RSaJasY4aw
Jg88CVHcMFHpsfoFisV+t4iCcuQOU/h27ELR+q2VrK6ouW10ZRj++uekewIIjs77
yBnMcUJGsRKwWXsjgwns3kARTZ0JO/OQnlv2SG+AsI1C6HUPdrAoxzbCEDlQGMjZ
3IDrOythju4pEoJ2IW/8TMx7bXLk33N1W9/PHaBCu9+uqDEUhUWy2AwXJ6bvDxed
PxkhaK2flBMJgO/tm7hGM5eHGb62JU4i+QeoHR5GmcTymgYLF8dA2dQup7AO+rvh
yus9ULNPN7QRr77l4387ux7IVy+xMKweMuYSiIouDgm1NBGc/DXxvzBUip3QlP99
VbnGQ74GpKxOSJYn9jQ9nG92BKs92WjGaLLCxiEll+ufwghmdHt0mMr3kVOHdZuZ
9Y2gzfu6EAJ6GvhZaOPA2hY2QJpbPIkytsRyJ2lNlHU//vY9CCO7zNxedo9cocQO
SiK4FZl8gCvY1YhSGgIwi/uCLMc0zYuNFTA5GD8wPF6Pt4pvEyWELCZZOXNby+Wi
9cBI5/+O6AEAmGVbQ4UARvVFHnPqk+VJqMNb
-----END CERTIFICATE-----


===
client-certificate-data

==
-----BEGIN CERTIFICATE-----
MIIE/TCCAuWgAwIBAgIRANizkdR0MFvEF9DVTww0OA4wDQYJKoZIhvcNAQELBQAw
DTELMAkGA1UEAxMCY2EwHhcNMTkwNTE3MTYyMDE5WhcNMjEwNTE2MTYzMDE5WjAw
MRcwFQYDVQQKEw5zeXN0ZW06bWFzdGVyczEVMBMGA1UEAxMMbWFzdGVyY2xpZW50
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA8p2sX8G+u7gR4vF7bLyF
jTt4MiFxJYPGcJd6aIBKl5J/pbVHHA2ltzYDvy7QJy+yggGLXJrBCjtJhy5tzazE
C9efJ/aBI9EbVnkeVPijEhAqJBtMtUoLeFGjOMQOIKAR6mWKANAY4GvQnnHEHJEn
obNtuErVIqq7bBjQyFEYF66s7torCTG76x6P34G9QG102Wla71kFAqIA8nPFJ+F7
oplrRMcozlA6V03nq5Xx7tns+WsTyk7RZ370ZPxSnms/H3nqh8+i+S6yFEIxI351
uwcp25bGeN7g+7p/V78jaE87I1aE/ns2B1gvstWv27TKgZnJYTv5tyKCIFVtuJEn
rxiba/a7aGnReyKp01WnuuI8WXeewwMl9my6hLZiOFkrE40NrZwzyB/w5LyjN489
KLPaDegIUwe4VtzlF8n3SgxltxSfK3vgx/cyXnmqpVAMwpc1XbAHdS5cnYdc6pZZ
1J17Sb5px5DYHl/qHcfp0EIqumDb0T+CR1PRVvqcZeQQCafWdbIQ2QIF6qp7VtA3
N1BRHZPII9Io9v4ltjXk4gzr3V3FsxQTGfEQzayiIGuPYc2R81gcN234wGI5yTT9
Xlt2hOTKZ83wGUUhjVHq0ojUihAkHpHBggDodt7iJMq7qz9tzCurTDitwXxKRira
y0lQ8+rqRz4BVPfsMzmaQFsCAwEAAaM1MDMwDgYDVR0PAQH/BAQDAgWgMBMGA1Ud
JQQMMAoGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggIB
ABoZJ5wJ8L487O5uQ3PHwnY8t9L0fLRMS82wBBU7IuqcOGhSW0DfRKzJp9xdHt4/
41pggPMWeoZh+A0xzm+m8AjSWPe6ioZ1Jxj5WWCgdMKRQvoc56KrqGd/rOGCJvJT
5PjZlZBTRLYv2ErGlNippJ2cGmpO/3FVhAjsBMTOF+Ybz+bXog7Iq6QXkl2mZZ4X
PWFMWa0pOUTUIvPXgTnrWjHNsH7JVW9vd1JEOVM6/uxSoTgQDqKcPB2HwKd6hCpf
eRxiwGLvNrr/zNsQssXceZL7i/xxwn9msVnQgsSk3GOpatGjJtXTB/S+0pvFJikf
jTO48K51W4lG38rnoHN1T4t/5hHk/6wbnYgJpeDUYmWwvhH+ptUZix80qS5VeRjv
zgo2+SovDQdu3An+02tPzwVYRWbm79ERgSBe5DIJV15/pPVwNCw+EsH6gjsLOCvy
p2FalLKdORXObPCLGH4l6e04zU9PoGDevuRB1o4xsGPPv/AAHSexPMV2ETw3XLSJ
f+F+BwuzHn2GcD2gsspHsZWmR1hr6dBQyHyqjJcCx0WQ5TGrq4ExCHqEYxlMuugn
uJsz9M7dl2vsssI43N7zE/RYB2j9mfm+i0AAeM5rzjbo/Vh+nB/VEtXRo1qQ3oJl
IGkj6NC4z+Ef2bgjMKV5nfZyAYbtI29vQr5799u21AfD
-----END CERTIFICATE-----


==


client-key-data
====

-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----



====
